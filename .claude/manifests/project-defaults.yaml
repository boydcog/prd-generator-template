# 프로젝트 기본 설정
# /init-project에서 생성되는 project.json의 기본값을 정의합니다.
# Drive 접근: Playwright 브라우저 (GCP/OAuth 키 불필요, 브라우저 로그인만)

# 기본 문서 유형 (document-types.yaml 참조)
# project.json에 document_type이 없으면 이 값을 사용합니다 (하위호환)
default_document_type: product-brief

# MVP 프로세스 단계 추적 기본값
# mvp_stage: 현재 단계 (S1~S5, null=MVP 프로세스 미사용)
# stage_status: in_progress | gate_passed | gate_stopped
# stage_history: 각 단계의 게이트 결정 이력 (배열)
mvp_stage: S1
stage_status: in_progress
stage_history: []

# 출력 언어
language: ko

# 인용 정책: strict | warn
# strict: 인용 누락 시 검증 실패
# warn: 인용 누락을 보고하되 검증은 통과
citation_policy: strict

# 에이전트 팀 구성 (agent-team-spec.md 참조)
agent_roles:
  - biz
  - marketing
  - research
  - tech
  - pm
  - synth

# 버전 관리
versioning:
  enabled: true
  format: "v{N}"                           # v1, v2, v3, ...
  keep_all: true                           # 이전 버전 보존

# Drive 업로드 설정
upload:
  ask_after_generation: true               # PRD 생성 후 업로드 여부 확인
  auto_upload: false                       # true면 자동 업로드 (확인 없이)
  include_citations: false                 # citations.json도 함께 업로드할지
  naming_pattern: "{project}"               # Google Docs 파일명 = 프로젝트명 (project.json의 name)
  # 탭 구조: {document_title} (상위 탭, H1에서 프로젝트명 제거) > v{N} (하위 탭)

# 출력 경로
# documents_dir: 문서 유형별 하위 디렉토리가 생성됩니다 (document-types.yaml의 output_dir_name)
# 예: .claude/artifacts/prd/, .claude/artifacts/tech-spec/, .claude/artifacts/marketing-brief/
output_paths:
  agents_dir: .claude/artifacts/agents
  documents_dir: .claude/artifacts        # base dir (하위에 문서유형별 디렉토리)
  citations_file: citations.json
  conflicts_file: conflicts.json
  metadata_file: metadata.json

# 증거 저장 경로
evidence_paths:
  raw_dir: .claude/knowledge/evidence/raw
  chunks_dir: .claude/knowledge/evidence/chunks
  index_file: .claude/knowledge/evidence/index/sources.jsonl

# 상태 파일 경로
state_paths:
  project_file: .claude/state/project.json
  sync_ledger: .claude/state/sync-ledger.json
  sync_log: .claude/state/sync-log.jsonl       # 수집 감사 로그 (JSONL)

# Sheets 내보내기 기본값
sheets_export:
  default_format: csv                      # csv | md
  max_rows: 500
  max_cols: 50
  include_empty_rows: false

# Playwright 제약사항 기본값 (sync-drive에서 참조)
playwright_constraints:
  evaluate_safe_limit: 30000               # bytes. 이 이상은 download event 사용
  batch_size: 3                            # 대용량 시 동시 페이지 수
  download_timeout: 30000                  # ms. waitForEvent('download') 타임아웃
  clipboard_poll_interval: 200              # ms. 클립보드 폴링 간격
  clipboard_poll_timeout: 5000             # ms. 클립보드 폴링 최대 대기
  max_retry_per_source: 2                  # primary + fallback 시도 횟수
