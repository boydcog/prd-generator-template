# PRD: 수학 문제 레벨링 품질 검증

> **버전**: v1
> **작성일**: 2026-02-13
> **작성자**: zoe
> **문서 유형**: 제품 요구사항 문서 (PRD)
> **에이전트**: biz, marketing, research, tech, pm, pedagogy

---

## 1. 개요 (Executive Summary)

본 프로젝트는 수학 문제의 난이도를 6가지 인지 부하 가중치(W1~W6)로 정량화하는 채점 체계의 품질을 검증하고, 이를 에듀테크 제품의 적응형 학습 엔진에 통합 가능한 수준으로 확립하는 것을 목표로 한다.

현재 데이터셋은 약 15,000개 덧셈/뺄셈 문제를 대상으로 W_총점(0~11점)을 산출하고, 이를 W단계(1~23)와 C단계(1~15)로 이중 매핑하는 구조이다. [SRC-math-difficulty-scoring@d17fde4f#chunk-0001]

**핵심 발견**: 가중치 체계의 방향성은 인지 부하 이론과 정합하나, ①W4(carry/borrow)의 과도한 지배력(최대 45%), ②W→C 매핑의 비결정론성, ③실제 학생 데이터 기반 검증 부재가 주요 과제로 식별되었다.

---

## 2. 문제 정의

### 현재 상황
에듀테크 분야에서 학생 수준에 맞는 수학 문제를 자동 추천하려면 객관적이고 일관된 난이도 기준이 필수적이다. 그러나 대부분의 수학 학습 플랫폼은 교사의 주관적 판단이나 단순 정답률에 의존하여 문제 난이도를 결정하고 있다.

### 핵심 문제
1. **객관적 난이도 기준 부재**: 상/중/하 3단계 분류로는 학습자 개인별 최적 난이도 구간(ZPD)을 타겟팅할 수 없다.
2. **블랙박스 AI 의존**: 기존 적응형 학습 시스템은 난이도 판정 근거를 설명할 수 없다.
3. **콜드 스타트 문제**: 학습 이력 데이터 없이는 문제 난이도를 결정할 수 없다.

### 기회
본 프로젝트의 W1~W6 가중치 체계는 이 세 가지 문제를 동시에 해결할 수 있는 잠재력을 가진다:
- 6차원 정량 기준 → 23단계 미세 레벨링
- 투명한 가중치 공식 → 설명 가능한 난이도
- 문제 속성 기반 사전 채점 → 콜드 스타트 무관

### 가중치 체계 현황

| 차원 | 범위 | 최대 기여율 | 인지 부하 이론 정합성 |
|------|------|-----------|-------------------|
| W1 연산 종류 | 0~+1.5 | 14% | 양호 (역연산 부하 반영) |
| W2 자릿수 | 0~+4.0 | 36% | 양호 (자릿값 인지 부하) |
| W3 숫자 크기 | 0~+1.5 | 14% | 부분적 (subitizing 경계 반영, 캡 제한적) |
| W4 절차적 복잡성 | 0~+5.0 | **45%** | 강함 (element interactivity), 간격 실증 필요 |
| W5 특수 숫자 | -1.5~0 | 감점 | 방향 타당, 수치 근거 부족 |
| W6 표현 방식 | 0~+0.5 | 5% | 현재 비활성 (일률 0.5 적용) |

---

## 3. 목표 / 비목표

### 목표 (Goals)
1. W1~W6 가중치 체계가 실제 학습 난이도를 정확히 반영하는지 검증
2. W→C 매핑 규칙을 명시적으로 문서화하여 결정론적 구현 보장
3. 에듀테크 제품에 통합 가능한 난이도 분류 API MVP 구축
4. 파일럿 학생 데이터와의 교차 검증 체계 수립

### 비목표 (Non-Goals)
1. 곱셈/나눗셈 가중치 체계 설계 (Phase 2)
2. 3자리 수 이상 연산 확장 (Phase 2)
3. 문장제 유형 분류 및 W6 세분화 (별도 프로젝트)
4. 학습 추천 알고리즘 구현 (레벨링 검증 완료 후)
5. UI/UX 구현 (본 PRD는 레벨링 엔진 백엔드에 한정)

### 핵심 KPI

| KPI | 목표값 | 측정 방법 |
|-----|--------|----------|
| W_총점-정답률 상관계수 | r ≥ 0.75 | 파일럿 학습자 데이터 교차 검증 |
| C등급 간 정답률 단조감소 비율 | ≥ 90% | C(n) 평균 정답률 > C(n+1) 비율 |
| W-C 매핑 일관성 | ≥ 95% | 동일 W_총점에서 C등급 일관 비율 |
| 가중치 커버리지 | 100% | 1~2자리 덧셈/뺄셈 전 조합 커버 |
| 엔진 계산 정확성 | 100% | CSV 원본 대비 전수 일치 |

---

## 4. 대상 사용자 / 페르소나

| 사용자 유형 | 니즈 | 가치 제안 |
|------------|------|----------|
| **에듀테크 개발팀** (1차) | 문제 난이도 자동 분류 API | 규칙 기반 레벨링으로 설명 가능한 추천 시스템 구축 |
| **수학 교사** (2차) | 학생 수준에 맞는 문제 배정 | 23단계 미세 레벨로 정밀한 학습 경로 설계 |
| **학습 콘텐츠 제작자** (3차) | 신규 문제의 난이도 사전 예측 | 가중치 공식에 따라 문제 생성 단계에서 레벨 확정 |
| **학부모/학생** (최종) | 적절한 난이도의 학습 경험 | 좌절/지루함 없는 최적 도전 구간 유지 |

---

## 5. 기능 요구사항

### FR-01: 채점 엔진

| ID | 요구사항 | 우선순위 |
|----|---------|---------|
| FR-01.1 | 6차원 가중치(W1~W6) 기반 W_총점 계산 엔진 | P0 |
| FR-01.2 | W1: 덧셈 0점, 뺄셈 +1.5점 적용 | P0 |
| FR-01.3 | W2: 동일 자릿수 0점, 비대칭 +1.0점, 확장 자릿당 +2.0점 | P0 |
| FR-01.4 | W3: 0~5 구성 0점, 6~9 포함 개당 +0.5점(최대 1.5점) | P0 |
| FR-01.5 | W4: No Carry/Borrow 0점, Single +3.0점, Double/Continuous +5.0점 | P0 |
| FR-01.6 | W5: 10의 배수 -1.0점, 동일 숫자 반복 -0.5점 감점 | P0 |
| FR-01.7 | W6: 표현 방식별 가중치 (현재 0.5 고정, 향후 세분화) | P1 |

### FR-02: 레벨 매핑

| ID | 요구사항 | 우선순위 |
|----|---------|---------|
| FR-02.1 | W_총점 → W(1~23) 매핑 규칙 구현 | P0 |
| FR-02.2 | W → C(1~15) 매핑 규칙 구현 (조건부 분기 포함) | P0 |
| FR-02.3 | 매핑 규칙을 외부 구성 파일(JSON/YAML)로 관리 | P0 |
| FR-02.4 | 연산 유형별 독립적 매핑 테이블 지원 | P1 |

### FR-03: 난이도 조회 API

| ID | 요구사항 | 우선순위 |
|----|---------|---------|
| FR-03.1 | `GET /api/v1/difficulty?expression=2+8` → C_level, W_scale, W1~W6 상세 | P0 |
| FR-03.2 | `POST /api/v1/difficulty/batch` → 배치 조회 (최대 1000건) | P0 |
| FR-03.3 | API Key 인증 및 Rate Limiting | P0 |

### FR-04: 검증 및 품질 관리

| ID | 요구사항 | 우선순위 |
|----|---------|---------|
| FR-04.1 | 전체 문제 레벨 재계산 배치 처리 | P0 |
| FR-04.2 | 가중치 변경 시 영향 분석 리포트 자동 생성 | P0 |
| FR-04.3 | 학생 데이터(정답률, 풀이 시간) 대비 상관관계 분석 | P0 |
| FR-04.4 | 레벨 분포 이상 탐지 (편중 경고) | P1 |

---

## 6. 비기능 요구사항

| ID | 항목 | 기준 |
|----|------|------|
| NFR-01 | 단건 조회 응답 시간 | < 10ms (p95), 캐시 히트 시 < 1ms |
| NFR-02 | 배치 조회 (1000건) | < 500ms (p95) |
| NFR-03 | 동시 접속 | 1,000 RPS (학교 수업 시간 피크) |
| NFR-04 | 전수 재계산 | 15,000건 < 30초 |
| NFR-05 | 엔진-CSV 정확성 | 100% 일치 |
| NFR-06 | API 가용성 | 99.9% (월간 다운타임 < 43분) |
| NFR-07 | 확장성 | 문제 수 10만건까지 선형 확장 |
| NFR-08 | 보안 | TLS 1.3, API Key, RBAC |
| NFR-09 | 감사 추적 | 모든 가중치/레벨 변경 이력 기록 |

---

## 7. UX 노트

### 교사 대시보드 (Phase 2)
- 학급별 C레벨 분포 히트맵
- 문제별 W1~W6 가중치 시각화 (레이더 차트)
- "왜 이 문제가 C=12인가?"에 대한 가중치 분해 설명

### 학부모 리포트
- 6차원 가중치를 3~5단계 직관적 표현으로 단순화
- 학습 경로 상 현재 위치와 다음 목표 시각화

### 인지 부하 관점 권고
- C단계 내 문제 동질성 확보: 같은 C단계에 인지적으로 이질적 문제가 혼재하지 않도록 서브레벨 도입 검토
- 학습 경로는 한 번에 하나의 새 개념만 도입 (scaffolding 원리)
- carry 없는 덧셈(W=6~8) → 1회 carry(W=15) → 연속 carry(W=23) 경로 권장

---

## 8. 기술 노트

### 아키텍처: 하이브리드 (룩업 + 실시간 계산)

```
┌─────────────────────────────────────────────────┐
│                   API Gateway                    │
│              (REST / GraphQL)                    │
├──────────────┬──────────────────────────────────┤
│   Lookup     │      Calculation Engine          │
│   Service    │   (Stateless Functions)           │
│  (Phase 1)   │      (Phase 2)                   │
├──────────────┼──────────────────────────────────┤
│  Pre-computed│   W1~W6 Calculator               │
│  Table (DB)  │   W→C Mapper                     │
│  ~15K rows   │   Carry/Borrow Detector          │
├──────────────┴──────────────────────────────────┤
│              Data Layer                          │
│   PostgreSQL / Redis Cache                       │
└─────────────────────────────────────────────────┘
```

### 주요 기술 의사결정

1. **Phase 1: 사전 계산 룩업 테이블** → Phase 2: Shadow Mode 검증 후 실시간 엔진 전환
2. **W→C 매핑**: 15,000건 전수 데이터에서 역공학 추출 → Decision Tree 또는 룩업 테이블
3. **데이터 저장**: CSV → PostgreSQL 마이그레이션
4. **Carry/Borrow 감지**: 자릿수별 덧셈/뺄셈 시뮬레이션 알고리즘

### 확장 시 규모 추정
- 곱셈/나눗셈 추가: ~60,000건 (4배)
- 3자리 수 확장: ~2,000,000건 (133배)

### 모델 결정: 가산 모델 유지 (Phase 1)
Phase 1에서는 현재 가산 모델(W_총점 = W1+...+W6)을 유지하여 투명성과 구현 단순성을 확보한다. Phase 2 파일럿 데이터 수집 후, W1×W4(뺄셈×borrow) 등 주요 상호작용 항의 통계적 유의성을 검정하여 유의미하면 모델을 확장한다 (pedagogy vs tech 충돌 해결안).

---

## 9. GTM 전략

### 포지셔닝
**"인지과학 기반 수학 난이도 측정의 표준"**
기존 솔루션의 블랙박스 AI와 차별화하여, 6차원 가중치 공개 공식으로 투명하고 설명 가능한 난이도 분류 체계를 제공한다.

### 핵심 메시징
1. **과학적 정밀도**: "감이 아닌, 과학으로 측정하는 수학 난이도"
2. **세밀한 단계 설계**: "23단계 난이도, 15레벨 커리큘럼 매핑"
3. **투명한 기준**: "왜 이 문제가 어려운지, 누구나 이해할 수 있습니다"

### 타겟 채널
- **1차 (B2B)**: 기술 백서, 에듀테크 컨퍼런스, 개발자 커뮤니티, 직접 영업
- **2차 (B2B2C)**: 학원 업계 매체, 교사 커뮤니티, 교육청 협력
- **3차 (B2C)**: 학부모 커뮤니티, SNS 학습 콘텐츠

### 런칭 단계
- Phase 0 (3개월 전): 교육학적 타당성 검증, PoC 3~5곳
- Phase 1 (2개월 전): 클로즈드 베타, 파일럿 학원 5~10곳
- Phase 2 (D-Day): B2B API 공식 오픈, 컨퍼런스 발표
- Phase 3 (3~6개월 후): 곱셈/나눗셈 확장, B2B2C 진입
- Phase 4 (6~12개월 후): 전 연산 커버리지, 해외 시장 검토

### 수익 모델 (B2B SaaS)

| 수익원 | 모델 | 대상 |
|--------|------|------|
| 난이도 분류 API | 호출당 과금 / 월정액 | 에듀테크 개발사 |
| 문제 은행 라이선스 | 연간 구독 | 학원/학교 |
| 커스텀 가중치 컨설팅 | 프로젝트 기반 | 교육 기관 |
| 학습 분석 대시보드 | 사용자당 월정액 | 교사/학원 |

---

## 10. 리스크

| ID | 유형 | 영향도 | 리스크 | 완화 방안 |
|----|------|--------|--------|----------|
| RSK-01 | 제품 | **높음** | W4(0/+3/+5) 급격한 점프로 중간 레벨 밀도 부족 | 파일럿 데이터 기반 W4 간격 재보정 |
| RSK-02 | 제품 | **높음** | W→C 매핑 비결정론성 (동일 W에서 다른 C) | 매핑 규칙 완전 문서화 + 전수 검증 |
| RSK-03 | 제품 | **높음** | 실증 데이터 부재 (전문가 판단만 의존) | 최소 300명 학생 파일럿 검증 |
| RSK-04 | 기술 | 중간 | 곱셈/나눗셈 확장 시 가중치 프레임워크 재설계 필요 | Phase 2 별도 설계 프로젝트 |
| RSK-05 | 시장 | 중간 | AI 기반 경쟁사 대비 규칙 기반 한계 인식 | 투명성/설명 가능성을 핵심 차별점으로 강조 |
| RSK-06 | 제품 | 중간 | W6 비활성화로 문장제 미지원 | Phase 1에서 명시적 문서화, 향후 세분화 계획 |
| RSK-07 | 제품 | 낮음 | W5 감점의 실증 근거 부족 | 파일럿 데이터로 심리적 안착점 효과 검증 |

---

## 11. 마일스톤

### Phase 1: 기반 구축 및 검증

| 마일스톤 | 주요 산출물 |
|---------|-----------|
| M1: 데이터 표준화 | CSV → JSON/DB 변환, 스키마 정의, 유효성 검증 |
| M2: 채점 엔진 MVP | W1~W6 계산 엔진, 기존 데이터 100% 일치 검증 |
| M3: 레벨 매핑 구현 | W→C 매핑 규칙 역공학 + 문서화, 외부 구성 파일 관리 |
| M4: API MVP | REST API, 단건/배치 조회, 인증/제한 |

### Phase 2: 학생 데이터 검증

| 마일스톤 | 주요 산출물 |
|---------|-----------|
| M5: 학생 데이터 연동 | 정답률/풀이 시간 수집 파이프라인 |
| M6: 상관관계 분석 | W/C 레벨 vs 실제 학습 성과 (목표: r ≥ 0.75) |
| M7: 가중치 보정 | 분석 기반 최적화, A/B 테스트, 상호작용 항 검정 |

### Phase 3: 확장

| 마일스톤 | 주요 산출물 |
|---------|-----------|
| M8: 곱셈/나눗셈 | W1 가중치 재설계, 신규 채점 규칙 |
| M9: 3자리 수 | W2 확장, 대규모 데이터셋 |
| M10: 분수/소수 | 새 가중치 차원 설계 |

---

## 12. 미해결 질문

| ID | 질문 | 우선순위 | 관련 에이전트 |
|----|------|---------|-------------|
| UQ-01 | W_총점 → W단계 매핑 공식이 정확히 무엇인가? (역공학 필요) | **P0** | research, tech |
| UQ-02 | W단계 → C단계 매핑에 적용되는 조건부 규칙의 완전한 목록은? | **P0** | research, pm |
| UQ-03 | 각 가중치 값(W1=1.5, W4=3/5 등)의 산출 근거는 전문가 합의인가 데이터 기반인가? | **P0** | pedagogy |
| UQ-04 | W4 간격(0→3→5)이 과소/과대 평가인지 실증 검증 방법은? | P1 | pedagogy, research |
| UQ-05 | W3 캡(최대 1.5점)이 3자리 수에서도 동일하게 적용되어야 하는가? | P1 | research |
| UQ-06 | W6을 수식형 전용으로 확정할 것인가, 문장제 확장을 계획할 것인가? | P1 | pedagogy, pm |
| UQ-07 | 학년/나이별로 가중치 체계를 차등 적용해야 하는가? | P2 | pedagogy |
| UQ-08 | GTM 시장 범위는 한국 내수인가 글로벌인가? | P1 | marketing, biz |
| UQ-09 | B2B vs B2C 우선 모델은? | P1 | marketing |

---

## 부록: 역할 간 충돌 해결 요약

| 충돌 | 주요 쟁점 | 해결 방향 |
|------|----------|----------|
| W4 간격 적정성 | biz/research: 간격 축소 vs pedagogy: 과소평가 가능 | 파일럿 데이터 기반 실증 재보정 |
| 가산 vs 상호작용 모델 | tech/biz: 가산 유지 vs pedagogy: 상호작용 반영 필요 | Phase 1 가산 유지, Phase 2 상호작용 항 검정 |
| 사전 계산 vs 실시간 | tech: 룩업 우선 vs pm: 실시간 엔진 병행 | 룩업 서빙 + 실시간 검증용 병렬 개발 |
| C단계 성격 | biz: 교육과정 매핑 vs pedagogy: 동질성 결여 | 매핑 규칙 문서화 + 서브레벨 도입 검토 |
| W6 처리 | research: 제거 vs pedagogy: 세분화 | Phase 1 현상 유지, 문장제 시 재설계 |

---

*이 문서는 6개 에이전트(biz, marketing, research, tech, pm, pedagogy)의 분석을 종합하여 자동 생성되었습니다.*
