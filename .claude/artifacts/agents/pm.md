# Maththera PRD - PM 산출물 (v4)

**프로젝트명**: Maththera
**버전**: 2.0 (v4 Master Matrix 유스케이스 반영)
**작성일**: 2026-02-13
**역할**: PM (프로덕트 매니저)
**대상 사용자**: 난산증 아동 (초등 저학년)

---

## 1. 프로젝트 개요

### 1.1 핵심 문제

난산증은 지능과 교육 기회가 충분함에도 수적 정보를 처리하는 뇌 회로의 발달적 결함으로 인해 수학 학습에 심각한 어려움을 겪는 상태이다. 기존 수학 교육은 "틀렸다/맞았다"만 판별하며, **왜 틀렸는지**를 인지적으로 설명하지 못한다.

### 1.2 솔루션

Maththera는 Master Matrix의 문제 정의-오답 진단-훈련 처방 체계를 통해, 오답의 인지적 원인을 자동 분류하고 적응형 훈련을 제공하는 AI 수학 훈련 시스템이다.

**v4 핵심 차별점**:
- Master Matrix 기반 5단계 오답 진단 파이프라인 (문제 정의 -> 관찰 기록 -> 오답 원인 -> 훈련 매핑 -> 훈련 모듈)
- 4가지 유스케이스로 검증된 진단 로직 (전략 불일치, 공간 인지 결손, 주의력/충동성, 원인 중복 분기)
- 변인 통제 Probe 시스템으로 오답 원인 정밀 확정
- AI 피드백 톤 가이드 (따뜻한 친구 같은 튜터 페르소나)

### 1.3 가설

Master Matrix의 문제 정의-오답 진단-훈련 처방 간의 상관관계를 체계화하면, 기획자가 명시하지 않은 복합적인 오답 패턴에 대해서도 Cogassist Agent가 매트릭스 체계에 따라 자율적으로 정확한 매핑을 수행할 수 있다.

---

## 2. 스코프 정의

### 2.1 In-Scope (MVP Phase 1)

| 영역 | 범위 | 근거 |
|------|------|------|
| **오답 진단 파이프라인** | 5단계 (문제 정의 -> 관찰 기록 -> 오답 원인 -> 훈련 매핑 -> 훈련 모듈) | Matrix 유스케이스 시나리오 |
| **문제 정의 태그** | L-level, C-level, 전략 태그 (STR_MAKE10, STR_PLACEVALUE 등) | 유스케이스 1~4 |
| **관찰 기록 태그** | RT, OBS_OVERRELIANCE_COUNTING, OBS_PLACEVALUE_CONFUSION, OBS_VERY_FAST_RT, OBS_RANDOM_GUESSING 등 | 유스케이스 1~4 |
| **오답 원인 태그** | MAKE10_STRATEGY_UNAVAILABLE, SPATIAL_L4_PLACE_VALUE, ATTENTION_L0_IMPULSE, SPATIAL_L4_ALIGNMENT, STRATEGY_L4_PLACEVALUE 등 | 유스케이스 1~4 |
| **훈련 매핑** | T12, T17, T19, T26, T27, T30 등 훈련 ID 자동 매핑 | 유스케이스 1~4 |
| **변인 통제 Probe** | 오답 원인 중복 시 Probe 문제 출제 -> Case A/B 분기 | 유스케이스 4 |
| **AI 피드백** | 톤 가이드 준수 (반말, 3문장, 10자, 비난 금지, 상황별 4 템플릿) | Voice Tone Guide |
| **RT 기반 유창성 판별** | 느림(정답이나 전략 미숙) + 극도로 빠름(충동적 반응) 양방향 진단 | 유스케이스 1, 3 |

### 2.2 Out-of-Scope

| 제외 항목 | 제외 이유 |
|-----------|-----------|
| 곱셈/나눗셈 | MVP는 덧셈/뺄셈 수감각에 집중 |
| DTx 인허가 절차 | 별도 규제 트랙 |
| 다국어 지원 | 한국어 전용 (반말 톤 가이드) |
| 보호자/교사 대시보드 (고급) | MVP에서는 기본 리포트만 |
| 오프라인 모드 | 네트워크 연결 필수 |
| Cogassist Agent 자율 학습 | 유스케이스 기반 룰 엔진으로 구현, 자율 학습은 Phase 2 |

---

## 3. 기능 요구사항

### FR-001: Master Matrix 오답 진단 파이프라인

**설명**: 사용자가 문제를 풀면 Matrix가 5단계 파이프라인을 자동 실행한다.

1. **문제 정의**: L-level, C-level, 전략 태그를 자동 설정
2. **관찰 기록**: RT, 행동 태그(OBS_*)를 수집
3. **오답 원인**: 관찰 기록과 문제 정의를 교차 분석하여 오답 원인 태그를 결정
4. **훈련 매핑**: 오답 원인 태그에 따라 훈련 ID를 자동 매핑
5. **훈련 모듈**: 매핑된 훈련 ID에 해당하는 훈련 컨텐츠를 제시

**수용 기준**:
- AC-001-1: 모든 문제에 L-level, C-level, 전략 태그가 정확히 태깅된다
- AC-001-2: 관찰 기록이 RT(밀리초 단위)와 행동 태그를 정확히 수집한다
- AC-001-3: 5단계 파이프라인이 2초 이내에 완료된다
- AC-001-4: 기획자가 명시하지 않은 복합 패턴에 대해서도 매트릭스 체계 내에서 매핑이 이루어진다

### FR-002: 전략 불일치 진단

**설명**: 정답이더라도 RT가 느리면 전략 미숙으로 진단한다. 문제가 요구하는 전략(예: STR_MAKE10)과 아동이 실제 사용하는 전략(예: OBS_OVERRELIANCE_COUNTING)의 불일치를 감지한다.

**참조 유스케이스**: 8+6 문제, RT 12초, 정답이지만 하나씩 세기 의심 -> MAKE10_STRATEGY_UNAVAILABLE_COUNTING_FALLBACK -> T12 -> T17

**수용 기준**:
- AC-002-1: 정답 + 느린 RT 조합에서 전략 불일치가 정확히 감지된다
- AC-002-2: 전략 태그와 관찰 행동 태그의 불일치 판정이 자동화된다
- AC-002-3: 유창성 부족(전략 미숙)과 자동화 완료를 정확히 구분한다

### FR-003: 공간 인지 결손 진단

**설명**: 오답 값이 특정 자릿수만 계산한 결과와 일치하면 SPATIAL 영역의 인지 문제로 판단한다.

**참조 유스케이스**: 23+4에서 오답 6 -> OBS_PLACEVALUE_CONFUSION -> SPATIAL_L4_PLACE_VALUE -> T26

**수용 기준**:
- AC-003-1: 오답과 부분 계산 결과의 일치 패턴이 자동 감지된다
- AC-003-2: 산술적 실수와 공간처리 인지 문제가 정확히 구분된다

### FR-004: 주의력/충동성 진단

**설명**: L < C(아동 레벨 < 문제 복잡도) 상황에서 극도로 빠른 RT와 무작위 응답 패턴을 감지하면, ATTENTION 도메인의 개입을 우선 설정한다.

**참조 유스케이스**: 18+6, RT 0.8초, OBS_VERY_FAST_RT + OBS_RANDOM_GUESSING -> ATTENTION_L0_IMPULSE -> T30 또는 T19

**수용 기준**:
- AC-004-1: L < C 조건에서 극도로 빠른 RT(기준: <1초)가 감지된다
- AC-004-2: 충동적 반응과 자동화 완료된 빠른 응답이 구분된다 (정답 여부, 패턴 일관성 등 복합 판정)
- AC-004-3: 수학적 지식 진단 이전에 주의력 환기 훈련이 우선 매핑된다

### FR-005: 변인 통제 Probe 시스템

**설명**: 오답 원인이 2가지 이상으로 추정될 때, 변인을 통제한 확인용 문제(Probe)를 즉시 출제하여 원인을 확정한다.

**참조 유스케이스**: 28+15에서 오답 33 (정답과 -10 차이) -> Probe: 20+15 (받아올림 제거) -> Case A(공간: T26) vs Case B(절차: T27)

**적용 로직**:
- Numeric Pattern: 오답과 정답의 차이에서 자릿수 관련 오류를 포착
- Variable Control: 가설(공간 vs 절차)을 검증하기 위해 Complexity 변인을 제거한 Probe 출제

**수용 기준**:
- AC-005-1: 오답 원인 중복이 감지되면 Probe 문제가 자동 생성된다
- AC-005-2: Probe 결과에 따라 Case A/B가 정확히 분기된다
- AC-005-3: Probe는 1문제로 원인을 확정하며, 확정 불가 시 추가 Probe 전략이 동작한다

### FR-006: AI 피드백 시스템

**설명**: 보이스 톤 가이드를 준수하는 실시간 피드백 생성. '따뜻하고 격려하는 친구 같은 튜터' 페르소나를 일관 유지한다.

**기본 규칙**:
- 전체 3문장 이내
- 문장당 10자 이내 (수식/힌트 필요 시 최대 15자)
- 반말 사용 (존댓말 금지)
- 비난/단정 금지
- 힌트는 1개만
- 항상 다음 한 걸음 제시

**상황별 템플릿**:

| 상황 | 구성 | 예시 |
|------|------|------|
| 정답 | 칭찬 1 + 확인 1 | "좋아!" / "정답이야!" |
| 오답 | 공감 1 + 힌트 1 + 재도전 1 | "괜찮아." / "하나만 더!" / "다시 해볼까?" |
| 과정 실수 | 칭찬 1 + 포인트 1 + 재시도 1 | "거의 다 왔어!" / "자리만 봐!" |
| 무응답 | 안심 1 + 작은 단계 1 + 선택지 1 | "괜찮아." / "하나씩 하자." |

**금지 목록**:
- 금지 표현: "틀렸어", "아니야", "왜 못해", "정신 차려", "빨리", "당연히", 비꼼/평가
- 금지 방식: 3문장 초과, 힌트 2개 이상, 비교/압박/벌점 느낌

**수용 기준**:
- AC-006-1: 모든 피드백이 3문장 이내, 문장당 10자(예외 15자) 이내이다
- AC-006-2: 금지 표현이 후처리 검증 레이어에서 100% 차단된다
- AC-006-3: 힌트는 반드시 1개만 포함된다
- AC-006-4: 4가지 상황 분류가 오답 진단 파이프라인 결과와 자동 연동된다

---

## 4. 비기능 요구사항

| ID | 영역 | 요구사항 |
|----|------|----------|
| NFR-001 | 보이스 톤 | 반말, 3문장 이내, 10자 이내, 비난/재촉/비교 금지, 금지어 후처리 필터 필수 |
| NFR-002 | 페르소나 | '따뜻하고 격려하는 친구 같은 튜터' 일관 유지, 혼내지/재촉하지/비교하지 않기 |
| NFR-003 | 성능 | 오답 진단 파이프라인 < 2초, 문제 출제 < 500ms, 훈련 로딩 < 3초 |
| NFR-004 | 접근성 | 난산증 아동의 작업기억 부하 고려, 한 화면 하나의 정보 |
| NFR-005 | 핵심 원칙 | (1) 절대 비난 금지 (2) RT가 기준 (정답이어도 느리면 진단) (3) 결정권 존중 (아동 주도) |
| NFR-006 | 데이터 무결성 | 문제 태그(L/C/전략), 관찰 태그(OBS), 오답 원인 태그 간 참조 무결성 자동 검증 |

---

## 5. 마일스톤 및 일정 (14주 MVP Phase 1)

### Phase 1: Matrix 데이터 + 진단 코어 (Week 1~4)

| 주차 | 마일스톤 | 산출물 |
|------|----------|--------|
| W1 | 문제 정의 태그 체계 구축 (L-level, C-level, 전략 태그) | 태그 스키마 + 데이터 검증 |
| W2 | 관찰 기록 + 오답 원인 태그 엔진 | 행동 태그 수집기, 오답 원인 분류기 |
| W3 | 훈련 매핑 엔진 + 변인 통제 Probe 시스템 | 훈련 ID 매핑 룰, Probe 출제 로직 |
| W4 | 5단계 파이프라인 통합 + 유스케이스 1~4 검증 | E2E 파이프라인 테스트 |

### Phase 2: 훈련 모듈 + 피드백 (Week 5~8)

| 주차 | 마일스톤 | 산출물 |
|------|----------|--------|
| W5 | 전략 관련 훈련 모듈 (T12, T17 등) | 10짝찾기, 10만들어더하기 인터랙션 |
| W6 | 공간 인지 훈련 모듈 (T26, T27) | 자릿값이해, 받아올림개념 인터랙션 |
| W7 | 주의력 훈련 모듈 (T19, T30) + RT 측정 | 주의력환기, 단계별힌트 인터랙션 |
| W8 | AI 피드백 시스템 + 톤 가이드 필터 | 피드백 템플릿 풀(상황별 20개+), 금지어 필터 |

### Phase 3: 통합 + 검증 (Week 9~14)

| 주차 | 마일스톤 | 산출물 |
|------|----------|--------|
| W9 | 전체 플로우 통합 (출제 -> 진단 -> 훈련 -> 피드백 -> 재평가) | E2E 테스트 |
| W10 | RT 측정 + 유창성/충동성 양방향 판별 로직 | RT 수집기, 기준값 분기 |
| W11~12 | 소규모 파일럿 (n=30) | RT baseline, 알고리즘 보정, 유스케이스 커버리지 확인 |
| W13~14 | 버그 수정 + 데이터 보정 + 출시 준비 | 최종 빌드 |

---

## 6. 수용 기준 체크리스트

- [ ] **AC-CORE-01**: 5단계 오답 진단 파이프라인이 2초 이내에 E2E로 동작한다
- [ ] **AC-CORE-02**: 유스케이스 1(전략 불일치) 진단 및 훈련 매핑이 정확히 동작한다
- [ ] **AC-CORE-03**: 유스케이스 2(공간 인지 결손) 진단 및 훈련 매핑이 정확히 동작한다
- [ ] **AC-CORE-04**: 유스케이스 3(주의력/충동성) 진단 및 훈련 매핑이 정확히 동작한다
- [ ] **AC-CORE-05**: 유스케이스 4(변인 통제 Probe) 분기가 Case A/B를 정확히 확정한다
- [ ] **AC-CORE-06**: AI 피드백이 톤 가이드(3문장, 10자, 반말, 비난 금지)를 100% 준수한다
- [ ] **AC-CORE-07**: 금지 표현 필터가 모든 금지 표현/금지 방식을 차단한다
- [ ] **AC-CORE-08**: RT 기반 유창성 판별(느림: 전략 미숙, 극빠름: 충동성)이 동작한다
- [ ] **AC-CORE-09**: 오답 원인 태그 경계값에서 무한 루프 없이 안전 처리된다
- [ ] **AC-CORE-10**: 전체 플로우(출제 -> 진단 -> 훈련 -> 피드백 -> 재평가)가 E2E로 동작한다

---

## 7. 의존성

### 기능 간 선후관계

```
FR-001 (파이프라인 코어) --> FR-002 (전략 불일치)
                          --> FR-003 (공간 인지)
                          --> FR-004 (주의력/충동성)
                          --> FR-005 (Probe 시스템)
FR-002~FR-005 (진단 로직) --> FR-006 (AI 피드백: 상황별 템플릿 연동)
FR-005 (Probe) --> FR-003 (공간 인지: Case A로 분기 가능)
```

### 외부 의존성

| 의존 항목 | 설명 | 리스크 |
|-----------|------|--------|
| RT baseline 데이터 | 파일럿 테스트를 통한 연령별 기준값 수집 | 부재 시 보수적 기준으로 시작 |
| 훈련 모듈 인터랙션 디자인 | T12, T17, T19, T26, T27, T30 등의 화면 설계 | W5 이전 확보 필요 |
| 유스케이스 확장 | 4개 유스케이스 외 추가 오답 패턴 발견 시 | 파일럿 테스트에서 보완 |
| 피드백 템플릿 풀 | 상황별 최소 20개 검수된 피드백 문구 | W8 이전 확보 필요 |

---

## 8. 리스크 관리

| ID | 리스크 | 영향도 | 완화 전략 |
|----|--------|--------|-----------|
| RSK-001 | Probe 분기 로직에서 변인 통제가 불완전하면 잘못된 원인 확정 -> 부적절한 훈련 매핑 | High | 상태 머신 + 룰 엔진 정형화, Probe Case A/B 단위 테스트 100% |
| RSK-002 | RT 0.8초 충동적 반응 판정에서 자동화 완료 아동 오진단 (false positive) | High | RT 구간화(5단계) + 파일럿(n=30) 연령별 보정 + 보수적 기준으로 시작 |
| RSK-003 | AI 피드백 톤 가이드 제약 위반 (15자 초과, 힌트 2개 이상) | Medium | 사전 검수 템플릿 풀 + 글자수/문장수/금지어 후처리 검증 레이어 |
| RSK-004 | 4개 유스케이스로 실제 오답 패턴 미커버 | Medium | 파일럿에서 신규 패턴 지속 추가, 'UNKNOWN' 폴백 태그 + 수동 리뷰 큐 |

---

## 9. 미결 사항 (Open Questions)

| ID | 우선순위 | 질문 |
|----|----------|------|
| Q-001 | High | Probe 주기/빈도 기준: 변인 통제 Probe의 출제 조건, 연속 Probe 수 제한, Probe 정확도 판정 기준이 미정 |
| Q-002 | High | 세션 길이 제한: 난산증 아동의 인지 피로를 고려한 1회 최대 문제 수, 권장 세션 시간(분)이 미정 |
| Q-003 | High | 훈련 모듈 상세 사양: T12, T17, T19, T26, T27, T30 각각의 인터랙션 설계(화면, 단계, 완료 조건)가 미정 |
| Q-004 | Medium | RT 기준값 연령별 보정: 12초(느림), 0.8초(극빠름) 기준이 초1 vs 초3에 동일 적용 가능한지 미검증 |
| Q-005 | Medium | 보호자/교사 리포트 MVP 범위: 진단 결과 전달 형태(리포트 vs 대시보드 vs 알림)가 미정 |
| Q-006 | Medium | 오답 원인 태그 완전성: 기억 인출 실패, 언어적 이해 결손 등 추가 카테고리 포함 범위가 미정 |
| Q-007 | Low | 다국어 확장 시 반말/존댓말 톤 가이드의 문화적 적응 방안이 미정 |

---

## 부록: 참조 증거

| 증거 ID | 출처 | 핵심 내용 |
|---------|------|----------|
| prd-template-example/chunk-0000 | PRD 구조 템플릿 | 스코프, 성공 지표, 리스크 관리, 타임라인 구조 |
| maththera-matrix-usecase/chunk-0000 | Maththera Matrix 유스케이스 | 4가지 유스케이스(전략 불일치, 공간 인지, 주의력, Probe), 5단계 파이프라인 |
| prd-template-voice-tone-guide/chunk-0000 | AI 피드백 톤 가이드 | 페르소나, 기본 규칙, 상황별 템플릿, 금지 목록 |
